# 多线程

## 并发与并行

并发：指两个或多个事件在同一个时间段内发生

并行：指两个或多个事件在同一时刻发生（同时发生）

## 进程与线程

进程：进程是指在一个内存中运行的应用程序，每个进程都有一个独立的内存空间，一个应用程序可以同时运行多个进程；进程也是程序的一次执行过程，是系统运行程序的基本单位；系统运行一个程序从创建、运行到消亡的过程

线程：线程是进程中的一个执行单元，负责当前进程中程序的执行，一个进程中至少有一个线程。一个进程中是可以有多个线程的，这个应用程序也可以称之为多线程程序

## 线程调度

### 分时调度

所有线程轮流使用CPU的使用权，平均分配每个线程占用CPU的时间

### 抢占式调度

抢先让优先级高的线程使用CPU，如果线程的优先级相同，那么会随机选择一个（线程随机性），Java使用的就是抢占式调度

## 创建多线程方式

### 创建Thread类的子类

1、创建一个Thread子类

2、在Thread类的子类中重写run方法，设置线程任务

3、创建Thread类的子类对象

4、调用Thread类中的方法start方法，开启新的线程，执行run方法

### 实现Runnable接口

1、创建一个Runnable接口的实现类

2、在实现类中重写Runnable接口的run方法，设置线程任务

3、创建一个Runnable接口的实现类对象

4、创建Thread类对象，构造方法中传递Runnable接口的实现类对象

5、调用Thread类中的start方法，开启新的线程执行run方法

## 实现Runnable接口创建多线程的好处

1、避免了单继承的局限性：一个类只能继承一个类，类继承了Thread类就不能继承其他的类，实现Runnable接口，还可以继承其他的类，实现Runnable接口，还可以继承其他类，实现其他的接口

2、增强了程序的扩展性，降低了程序的耦合性：实现Runnable接口的方式，把设置线程任务和开启新线程进行了分离，实现类中，重写了run方法，用来设置线程任务，创建Thread类对象，调用start方法，用来开启新线程

## 同步代码块

格式：

synchronized(锁对象){
    可能会出现线程安全问题的代码（访问共享数据）
}

注意：

1、通过代码块中的锁对象，可以使用任意的对象

2、但是必须保证多个线程使用锁对象是同一个

3、锁对象作用：把同步代码块锁住，只让一个线程在同步代码块中执行

## 同步方法

1、把访问了共享数据的代码抽取出来，放在一个方法中

2、在方法上加入synchronized关键字

